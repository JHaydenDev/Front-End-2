{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{useState}from\"react\";import{axiosWithAuth}from\"../utils/axiosWithAuth\";import SignUp from\"./SignUp\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={credentials:{username:\"\",password:\"\"},message:\"\"};_this.handleChange=function(e){_this.setState({credentials:_objectSpread(_objectSpread({},_this.state.credentials),{},_defineProperty({},e.target.name,e.target.value))});};_this.login=function(e,credentials){e.preventDefault();// login to retreive the JWT token\n// add the token to localStorage\n// route to /protected (whatever landing page)\naxiosWithAuth()// base of '/api/login' inside axiosWithAuth in utils folder\n.post(\"https://bw-guess-who.herokuapp.com/api/login\",credentials).then(function(res){// localStorage.setItem(\"token\", res.data.payload) ; console.log(res, \"this\");\n// this.props.history.push(\"/protected\");\nvar info=res.data.user;_this.props.setLoggedInUser({id:info.id,level:info.level,points:info.points,username:info.username});_this.setState({message:\"\"});}).catch(function(err){console.log(err.response);_this.setState({message:\"\".concat(err.response.data.message)});});};_this.GoToRegister=function(){_this.props.setLoginOrRegister(\"register\");};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;if(this.props.loggedInUser.username===\"\"&&this.props.loginOrRegister===\"login\"){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){return _this2.login(e,_this2.state.credentials);},className:\"login-form\"},/*#__PURE__*/React.createElement(\"div\",{style:{color:\"red\"}},this.state.message),/*#__PURE__*/React.createElement(\"div\",{className:\"input-div\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"username\",placeholder:\"Username\",value:this.state.credentials.username,onChange:this.handleChange,style:{width:\"23em\",height:\"2em\",margin:\".2em 0\"}}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:this.state.credentials.password,onChange:this.handleChange,style:{width:\"23em\",height:\"2em\",margin:\".2em 0\"}})),/*#__PURE__*/React.createElement(\"div\",{className:\"button-div\"},/*#__PURE__*/React.createElement(\"button\",{class:\"form-button\"},\"Log In\"),/*#__PURE__*/React.createElement(\"button\",{name:\"register\",type:\"button\",onClick:this.GoToRegister,class:\"form-button\"},\"Click Here to Sign Up\"))));}else if(this.props.loggedInUser.username===\"\"&&this.props.loginOrRegister===\"register\"){return/*#__PURE__*/React.createElement(SignUp,{loggedInUser:this.props.loggedInUser,setLoggedInUser:this.props.setLoggedInUser,loginOrRegister:this.props.loginOrRegister,setLoginOrRegister:this.props.setLoginOrRegister});}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"welcome-div\"},/*#__PURE__*/React.createElement(\"p\",{className:\"welcome-text\"},\"Welcome, \",this.props.loggedInUser.username,\"! Thanks for logging in!\"),/*#__PURE__*/React.createElement(\"p\",{className:\"welcome-text\"},\"Click Play Game to start your game!\"));}}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["C:/Users/josep/Desktop/GitHub/guessWho/Front-End-2/src/components/Login.js"],"names":["React","useState","axiosWithAuth","SignUp","Login","state","credentials","username","password","message","handleChange","e","setState","target","name","value","login","preventDefault","post","then","res","info","data","user","props","setLoggedInUser","id","level","points","catch","err","console","log","response","GoToRegister","setLoginOrRegister","loggedInUser","loginOrRegister","color","width","height","margin","Component"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\r\nimport SignUp from \"./SignUp\";\r\n\r\nclass Login extends React.Component {\r\n  state = {\r\n    credentials: {\r\n      username: \"\",\r\n      password: \"\"\r\n    },\r\n    message: \"\",\r\n  };\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      credentials: {\r\n        ...this.state.credentials,\r\n        [e.target.name]: e.target.value\r\n      }\r\n    });\r\n  };\r\n\r\n  login = (e, credentials) => {\r\n    e.preventDefault();\r\n    // login to retreive the JWT token\r\n    // add the token to localStorage\r\n    // route to /protected (whatever landing page)\r\n    axiosWithAuth()\r\n      // base of '/api/login' inside axiosWithAuth in utils folder\r\n      .post(\"https://bw-guess-who.herokuapp.com/api/login\", credentials)\r\n      .then(res => {\r\n        // localStorage.setItem(\"token\", res.data.payload) ; console.log(res, \"this\");\r\n        // this.props.history.push(\"/protected\");\r\n        var info = res.data.user;\r\n        this.props.setLoggedInUser({\r\n            id: info.id,\r\n            level: info.level,\r\n            points: info.points,\r\n            username: info.username,\r\n        })\r\n        this.setState({message:``});\r\n      })\r\n      .catch(err => {\r\n        console.log(err.response);\r\n        this.setState({message:`${err.response.data.message}`});\r\n      });\r\n  };\r\n\r\n  GoToRegister = () => {\r\n    this.props.setLoginOrRegister(\"register\");\r\n  }\r\n\r\n\r\n  render() {\r\n  if(this.props.loggedInUser.username === \"\" && this.props.loginOrRegister === \"login\") {\r\n      return (\r\n        <div>\r\n          <form onSubmit={e => this.login(e, this.state.credentials)} className=\"login-form\">\r\n            <div style={{color: \"red\"}}>{this.state.message}</div>\r\n            <div className=\"input-div\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"username\"\r\n                placeholder=\"Username\"\r\n                value={this.state.credentials.username}\r\n                onChange={this.handleChange}\r\n                style={{width: \"23em\", height: \"2em\", margin: \".2em 0\"}}\r\n              />\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                placeholder=\"Password\"\r\n                value={this.state.credentials.password}\r\n                onChange={this.handleChange}\r\n                style={{width: \"23em\", height: \"2em\", margin: \".2em 0\"}}\r\n              />\r\n            </div>\r\n            <div className=\"button-div\">\r\n              <button class=\"form-button\">Log In</button>\r\n              <button name=\"register\" type=\"button\" onClick={this.GoToRegister} class=\"form-button\">Click Here to Sign Up</button>\r\n            </div>\r\n            \r\n          </form>\r\n        </div>\r\n      );\r\n    } else if (this.props.loggedInUser.username === \"\" && this.props.loginOrRegister === \"register\") {\r\n      return (\r\n        <SignUp loggedInUser={this.props.loggedInUser} setLoggedInUser={this.props.setLoggedInUser} loginOrRegister={this.props.loginOrRegister} setLoginOrRegister={this.props.setLoginOrRegister}/>\r\n      )\r\n\r\n    } else {\r\n      return (\r\n        <div className=\"welcome-div\">\r\n          <p className=\"welcome-text\">Welcome, {this.props.loggedInUser.username}! Thanks for logging in!</p>\r\n          <p className=\"welcome-text\">Click Play Game to start your game!</p>\r\n        </div>\r\n      )\r\n      \r\n    }\r\n  }\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}