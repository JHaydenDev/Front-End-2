{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\josep\\\\Desktop\\\\GitHub\\\\guessWho\\\\Front-End-2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{axiosWithAuth}from\"../utils/axiosWithAuth\";var SignUp=/*#__PURE__*/function(_React$Component){_inherits(SignUp,_React$Component);var _super=_createSuper(SignUp);function SignUp(){var _this;_classCallCheck(this,SignUp);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={credentials:{username:\"\",password:\"\"},message:\"\"};_this.handleChange=function(e){_this.setState({credentials:_objectSpread(_objectSpread({},_this.state.credentials),{},_defineProperty({},e.target.name,e.target.value))});};_this.login=function(e,credentials){e.preventDefault();// login to retreive the JWT token\n// add the token to localStorage\n// route to /protected (whatever landing page)\naxiosWithAuth()// base of '/api/login' inside axiosWithAuth in utils folder\n.post(\"https://bw-guess-who.herokuapp.com/api/register\",credentials).then(function(res){localStorage.setItem(\"token\",res.data.payload);console.log(res,\"this\");// this.props.history.push(\"/protected\");\nvar info=res.data;_this.props.setLoggedInUser({id:info.id,level:info.level,points:info.points,username:info.username});_this.setState({message:\"\"});}).catch(function(err){console.log(err.response);_this.setState({message:\"User already exists\"});});};_this.GoToLogin=function(){_this.props.setLoginOrRegister(\"login\");};return _this;}_createClass(SignUp,[{key:\"render\",value:function render(){var _this2=this;if(this.props.loggedInUser.username===\"\"){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){return _this2.login(e,_this2.state.credentials);},className:\"login-form\"},/*#__PURE__*/React.createElement(\"div\",{style:{color:\"red\"}},this.state.message),/*#__PURE__*/React.createElement(\"div\",{className:\"input-div\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"username\",placeholder:\"Username\",value:this.state.credentials.username,onChange:this.handleChange,style:{width:\"23em\",height:\"2em\",margin:\".2em 0\"}}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:this.state.credentials.password,onChange:this.handleChange,style:{width:\"23em\",height:\"2em\",margin:\".2em 0\"}})),/*#__PURE__*/React.createElement(\"div\",{className:\"button-div\"},/*#__PURE__*/React.createElement(\"button\",{class:\"form-button\"},\"Sign Up\"),/*#__PURE__*/React.createElement(\"button\",{name:\"register\",type:\"button\",onClick:this.GoToLogin,class:\"form-button\"},\"Click Here to Login\"))));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"welcome-div\"},/*#__PURE__*/React.createElement(\"p\",{className:\"welcome-text\"},\"You are already logged in as \",this.props.loggedInUser.username,\".\"),/*#__PURE__*/React.createElement(\"p\",{className:\"welcome-text\"},\"Click Play Game to start your game!\"));}}}]);return SignUp;}(React.Component);export default SignUp;","map":{"version":3,"sources":["C:/Users/josep/Desktop/GitHub/guessWho/Front-End-2/src/components/SignUp.js"],"names":["React","axiosWithAuth","SignUp","state","credentials","username","password","message","handleChange","e","setState","target","name","value","login","preventDefault","post","then","res","localStorage","setItem","data","payload","console","log","info","props","setLoggedInUser","id","level","points","catch","err","response","GoToLogin","setLoginOrRegister","loggedInUser","color","width","height","margin","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\r\n\r\nclass SignUp extends React.Component {\r\n  state = {\r\n    credentials: {\r\n      username: \"\",\r\n      password: \"\"\r\n    },\r\n    message: \"\",\r\n  };\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      credentials: {\r\n        ...this.state.credentials,\r\n        [e.target.name]: e.target.value\r\n      }\r\n    });\r\n  };\r\n\r\n  login = (e, credentials) => {\r\n    e.preventDefault();\r\n    // login to retreive the JWT token\r\n    // add the token to localStorage\r\n    // route to /protected (whatever landing page)\r\n    axiosWithAuth()\r\n      // base of '/api/login' inside axiosWithAuth in utils folder\r\n      .post(\"https://bw-guess-who.herokuapp.com/api/register\", credentials)\r\n      .then(res => {\r\n        localStorage.setItem(\"token\", res.data.payload) ; console.log(res, \"this\");\r\n        // this.props.history.push(\"/protected\");\r\n        var info = res.data;\r\n        this.props.setLoggedInUser({\r\n          id: info.id,\r\n          level: info.level,\r\n          points: info.points,\r\n          username: info.username,\r\n        })\r\n        this.setState({message:``});\r\n      })\r\n      .catch(err => {\r\n        console.log(err.response)\r\n        this.setState({message:`User already exists`});\r\n      });\r\n  };\r\n\r\n  GoToLogin = () => {\r\n    this.props.setLoginOrRegister(\"login\");\r\n  }\r\n\r\n  render() {\r\n  if(this.props.loggedInUser.username === \"\") {\r\n    return (\r\n      <div>\r\n        <form onSubmit={e => this.login(e, this.state.credentials)} className=\"login-form\">\r\n        <div style={{color: \"red\"}}>{this.state.message}</div>\r\n          <div className=\"input-div\">\r\n            <input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              placeholder=\"Username\"\r\n              value={this.state.credentials.username}\r\n              onChange={this.handleChange}\r\n              style={{width: \"23em\", height: \"2em\", margin: \".2em 0\"}}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Password\"\r\n              value={this.state.credentials.password}\r\n              onChange={this.handleChange}\r\n              style={{width: \"23em\", height: \"2em\", margin: \".2em 0\"}}\r\n            />\r\n          </div>\r\n          <div className=\"button-div\">\r\n            <button class=\"form-button\">Sign Up</button>\r\n            <button name=\"register\" type=\"button\" onClick={this.GoToLogin} class=\"form-button\">Click Here to Login</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n    } else {\r\n      return (\r\n        <div className=\"welcome-div\">\r\n          <p className=\"welcome-text\">You are already logged in as {this.props.loggedInUser.username}.</p>\r\n          <p className=\"welcome-text\">Click Play Game to start your game!</p>\r\n        </div>\r\n      )\r\n      \r\n    }\r\n  }\r\n}\r\n\r\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}